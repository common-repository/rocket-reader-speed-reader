function getCookie(r){for(var e=r+"=",t=document.cookie.split(";"),o=0;o<t.length;o++){var n=t[o].trim();if(0==n.indexOf(e))return n.substring(e.length,n.length)}return""}var wpm=rr_init_WPM,delay_ms=parseInt(6e4/wpm),playing=!1,words,word_ptr=-1,currentPostID=0,use_popup=rr_init_use_popup;jQuery(document).ready(function(){var letter_width=20;jQuery(".rr_wrapper, .rr_wrapper_popup").each(function(){var r=jQuery(this).attr("postid"),e="";e+='<div id="rr_reading_pane'+r+'" class="rr_reading_pane">',e+='  <div id="rr_word_wrapper'+r+'" class="rr_word_wrapper">',e+='    <div id="rr_word'+r+'" class="rr_word"></div>',e+="  </div>",e+="</div>",e+='<div id="rr_button_container'+r+'">',"Y"==use_popup?(e+='<script type="text/javascript">',e+="jQuery(function() {",e+='	jQuery("#rr_wrapper'+r+'").dialog({',e+="		autoOpen: false,",e+="     modal: true,",e+='		dialogClass: "dlg-no-close",',e+="     closeOnEscape: false",e+="	});",e+='jQuery("#rr_btn_play'+r+'").on("click", function() {',e+='		jQuery("#rr_wrapper'+r+'").dialog("open");',e+='     jQuery("#rr_wrapper'+r+'").css("margin-left","-"+(jQuery("#rr_wrapper'+r+'").width()/2)+"px");',e+='     jQuery("#rr_wrapper'+r+'").css("margin-top","-"+(jQuery("#rr_wrapper'+r+'").height()/2)+"px");',e+='     jQuery("#rr_wrapper'+r+'").show();',e+='     rr_play("'+r+'");',e+="	});",e+="});",e+="</script>"):(e+='<div id="rr_btn_play'+r+'" class="rr_btn_play">',e+='  <button onclick="rr_play('+r+');" title="'+rr_read_with_reader+'">ROCKET READER</button>',e+="</div>"),e+='  <div id="rr_playing_controls'+r+'" class="rr_playing_controls">',e+='    <div id="rr_btn_close'+r+'">',e+='      <button class="rr_button" onclick="rr_close();" title="'+rr_close+'">&times;</button>',e+="    </div>",e+='    <div id="rr_btn_pause'+r+'">',e+='      <button class="rr_button" onclick="rr_pause();" title="'+rr_pause+'">||</button>',e+="    </div>",e+='    <div id="rr_btn_resume'+r+'">',e+='      <button class="rr_button" onclick="rr_resume('+r+');" title="'+rr_resume+'">&gt;</button>',e+="    </div>",e+='    <div id="rr_btn_plus'+r+'">',e+='      <button class="rr_button" onclick="rr_plus();" title="'+rr_increase_speed+'">+</button>',e+="    </div>",e+='    <div id="rr_btn_minus'+r+'">',e+='      <button class="rr_button" onclick="rr_minus();" title="'+rr_decrease_speed+'">-</button>',e+="    </div>",e+='    <div id="rr_btn_bold'+r+'">',e+='      <button class="rr_button" onclick="rr_font_weight();" title="'+rr_bold_on_off+'">b</button>',e+="    </div>",e+="  </div><!-- rr_playing_controls -->",e+="</div><!-- rr_button_container -->",e+='<div id="rr_delay'+r+'" class="rr_delay"></div>',e+='<br clear="all">',jQuery(this).html(e)});var tmp=getCookie("rr_wpm");"undefined"!=typeof tmp&&""!=tmp&&"NaN"!=tmp&&(wpm=parseInt(tmp)),delay_ms=6e4/wpm;var tmp=getCookie("rr_font_weight"),fw=400;"undefined"!=typeof tmp&&""!=tmp&&"NaN"!=tmp&&(fw=parseInt(tmp)),jQuery(".rr_reading_pane").css("font-weight",fw),jQuery(".rr_btn_play").show(),rr_play=function(postID){playing?rr_close(postID):(currentPostID=postID,"N"==use_popup&&(jQuery("#rr_btn_play"+currentPostID).hide(),jQuery("#rr_wrapper"+currentPostID).css("height","158px")),jQuery("#rr_credits"+currentPostID).show(),jQuery("#rr_btn_resume"+currentPostID).hide(),jQuery("#rr_playing_controls"+currentPostID).show(),jQuery("#rr_delay"+currentPostID).show(),jQuery("#rr_wrapper"+currentPostID).css("background-color",rr_init_cont_bgcolor),jQuery("#rr_wrapper"+currentPostID).css("border","solid 1px "+rr_init_cont_bordercolor),rr_show_speed(),words=eval("words"+currentPostID),jQuery("#rr_reading_pane"+currentPostID).fadeIn(1500,function(){playing=!0,word_ptr=-1,rr_display_word()}))},rr_close=function(r,e){"undefined"!=typeof r&&null!=r?rr_final_close(r):jQuery("#rr_wrapper"+currentPostID).fadeOut(e,function(){rr_final_close(r)})},rr_final_close=function(r){playing=!1,word_ptr=-1,jQuery("#rr_word"+currentPostID).html(""),"Y"==use_popup?jQuery("#rr_wrapper"+currentPostID).hide():(jQuery("#rr_wrapper"+currentPostID).css("height",""),jQuery("#rr_wrapper"+currentPostID).show(),jQuery("#rr_btn_play"+currentPostID).show()),jQuery("#rr_credits"+currentPostID).hide(),jQuery("#rr_playing_controls"+currentPostID).hide(),jQuery("#rr_delay"+currentPostID).hide(),jQuery("#rr_reading_pane"+currentPostID).hide(),jQuery("#rr_wrapper"+currentPostID).css("background-color",""),jQuery("#rr_wrapper"+currentPostID).css("border",""),"undefined"!=typeof r&&null!=r&&rr_play(r)},rr_pause=function(){playing=!1,jQuery("#rr_btn_resume"+currentPostID).show(),jQuery("#rr_btn_pause"+currentPostID).hide()},rr_resume=function(){jQuery("#rr_btn_resume"+currentPostID).hide(),jQuery("#rr_btn_pause"+currentPostID).show(),playing=!0,rr_display_word()},rr_minus=function(){wpm>20&&(wpm-=10,document.cookie="rr_wpm="+wpm+"; expires=Thu, 5 Dec 2999 12:00:00 GMT; path=/",delay_ms=parseInt(6e4/wpm),rr_show_speed())},rr_plus=function(){wpm+=10,document.cookie="rr_wpm="+wpm+"; expires=Thu, 5 Dec 2999 12:00:00 GMT; path=/",delay_ms=parseInt(6e4/wpm),rr_show_speed()},rr_font_weight=function(){var r=jQuery(".rr_reading_pane").css("font-weight");r=400==r?700:400,document.cookie="rr_font_weight="+r+"; expires=Thu, 5 Dec 2999 12:00:00 GMT; path=/",jQuery(".rr_reading_pane").css("font-weight",r)},rr_show_speed=function(){jQuery("#rr_delay"+currentPostID).html(""+rr_speed+": <strong>"+wpm+"</strong> "+rr_words+" / "+rr_minute)},rr_display_word=function(){if(playing){if(word_ptr++>=words.length-1)return playing=!1,void rr_close(null,2e3);var r=words[word_ptr];if(r){var e=parseInt(r.length/2);r.length%2==0&&e--,e=rr_find_vowel(r,e),r=rr_mark_orp(r,e),jQuery("#rr_reading_pane"+currentPostID).css("background-color",rr_init_bgcolor),jQuery("#rr_reading_pane"+currentPostID).css("border-color",rr_init_bordercolor);var t=jQuery("#rr_reading_pane"+currentPostID).width()/2,o=t-e*letter_width;jQuery("#rr_word"+currentPostID).css("left",o+"px"),jQuery("#rr_word"+currentPostID).css("color",rr_init_textcolor),jQuery("#rr_word"+currentPostID).html(r)}word_ptr>=words.length-1?setTimeout(rr_display_word,500):setTimeout(rr_display_word,delay_ms)}},rr_mark_orp=function(r,e){return r.substr(0,e)+'<span style="color:'+rr_init_fp_color+'">'+r.substr(e,1)+"</span>"+r.substr(e+1)},rr_find_vowel=function(r,e){for(i=e;i>=0;i--)if(/[aeiou]/i.test(r[i]))return i;return e}});